{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Amoolya Suneja\\\\Desktop\\\\AI-Liveboard\\\\client\\\\src\\\\components\\\\whiteboard.jsx\",\n  _s = $RefreshSig$();\nimport React, { useRef, useEffect, useContext, useState } from 'react';\nimport { Stage, Layer, Line, Circle, Rect } from 'react-konva';\nimport { SHAPES, EVENTS } from '../utils/constants';\nimport useDrawing from '../hooks/useDrawing';\nimport { SocketContext } from '../context/SocketContext';\nimport { recognizeShape } from '../utils/shapeRecognition';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Whiteboard = ({\n  roomId,\n  users,\n  onToolChange,\n  onClearBoard,\n  onSaveNotes,\n  onExport\n}) => {\n  _s();\n  const socket = useContext(SocketContext);\n  const stageRef = useRef(null);\n  const [debugInfo, setDebugInfo] = useState(\"\");\n  const [stageSize, setStageSize] = useState({\n    width: 800,\n    height: 600\n  });\n  const [currentTool, setCurrentTool] = useState('freehand');\n  const {\n    elements,\n    setElements,\n    isDrawing,\n    handleDrawStart,\n    handleDrawMove,\n    handleDrawEnd\n  } = useDrawing(socket, roomId);\n\n  // Update stage size on mount and window resize\n  useEffect(() => {\n    const updateStageSize = () => {\n      var _stageRef$current;\n      const container = (_stageRef$current = stageRef.current) === null || _stageRef$current === void 0 ? void 0 : _stageRef$current.container();\n      if (container) {\n        const rect = container.getBoundingClientRect();\n        setStageSize({\n          width: rect.width,\n          height: rect.height\n        });\n      }\n    };\n    updateStageSize();\n    window.addEventListener('resize', updateStageSize);\n    return () => window.removeEventListener('resize', updateStageSize);\n  }, []);\n\n  // Handle tool changes\n  const handleToolChange = tool => {\n    setCurrentTool(tool);\n    setDebugInfo(`Tool changed to: ${tool}`);\n  };\n\n  // Handle clear board\n  const handleClearBoard = () => {\n    setElements([]);\n    socket.emit(EVENTS.CLEAR_BOARD, {\n      roomId\n    });\n    setDebugInfo(\"Board cleared\");\n  };\n\n  // Handle save notes\n  const handleSaveNotes = () => {\n    var _stageRef$current2;\n    const canvas = (_stageRef$current2 = stageRef.current) === null || _stageRef$current2 === void 0 ? void 0 : _stageRef$current2.toDataURL();\n    const link = document.createElement('a');\n    link.download = `meeting-notes-${roomId}-${Date.now()}.png`;\n    link.href = canvas;\n    link.click();\n    setDebugInfo(\"Notes saved as image\");\n  };\n\n  // Handle export\n  const handleExport = () => {\n    const meetingData = {\n      roomId,\n      users: users.map(u => u.name),\n      elements,\n      timestamp: new Date().toISOString()\n    };\n    const dataStr = JSON.stringify(meetingData, null, 2);\n    const dataBlob = new Blob([dataStr], {\n      type: 'application/json'\n    });\n    const link = document.createElement('a');\n    link.download = `meeting-export-${roomId}-${Date.now()}.json`;\n    link.href = URL.createObjectURL(dataBlob);\n    link.click();\n    setDebugInfo(\"Meeting exported as JSON\");\n  };\n\n  // Socket listeners\n  useEffect(() => {\n    const handleRemoteDrawStart = element => {\n      setElements(prev => [...prev, element]);\n    };\n    const handleRemoteDrawMove = point => {\n      setElements(prev => {\n        if (prev.length === 0) return prev;\n        const lastIndex = prev.length - 1;\n        const updated = [...prev];\n        updated[lastIndex] = {\n          ...updated[lastIndex],\n          points: [...updated[lastIndex].points, point]\n        };\n        return updated;\n      });\n    };\n    const handleShapeRecognized = shape => {\n      setElements(prev => [...prev, {\n        ...shape,\n        id: Date.now()\n      }]);\n      setDebugInfo(`Shape corrected: ${shape.type}`);\n    };\n    const handleClearBoard = () => {\n      setElements([]);\n      setDebugInfo(\"Board cleared by another user\");\n    };\n    socket.on(EVENTS.DRAW_START, handleRemoteDrawStart);\n    socket.on(EVENTS.DRAW_MOVE, handleRemoteDrawMove);\n    socket.on(EVENTS.SHAPE_RECOGNIZED, handleShapeRecognized);\n    socket.on(EVENTS.CLEAR_BOARD, handleClearBoard);\n    return () => {\n      socket.off(EVENTS.DRAW_START, handleRemoteDrawStart);\n      socket.off(EVENTS.DRAW_MOVE, handleRemoteDrawMove);\n      socket.off(EVENTS.SHAPE_RECOGNIZED, handleShapeRecognized);\n      socket.off(EVENTS.CLEAR_BOARD, handleClearBoard);\n    };\n  }, [setElements, socket]);\n\n  // Drawing events\n  const handleMouseDown = e => {\n    const stage = e.target.getStage();\n    const pos = stage.getPointerPosition();\n    if (currentTool === 'freehand') {\n      handleDrawStart(pos.x, pos.y);\n      setDebugInfo(\"Drawing started...\");\n    } else if (currentTool === 'circle' || currentTool === 'rectangle') {\n      // For shape tools, we'll handle them differently\n      setDebugInfo(`${currentTool} tool selected - draw to create shape`);\n    }\n  };\n  const handleMouseMove = e => {\n    if (!isDrawing || currentTool !== 'freehand') return;\n    const stage = e.target.getStage();\n    const pos = stage.getPointerPosition();\n    handleDrawMove(pos.x, pos.y);\n  };\n  const handleMouseUp = () => {\n    if (!isDrawing || currentTool !== 'freehand') return;\n    handleDrawEnd();\n    if (elements.length === 0) return;\n    const lastElement = elements[elements.length - 1];\n    if (lastElement.type === SHAPES.FREEHAND && lastElement.points.length >= 6) {\n      try {\n        console.log(\"Attempting shape recognition with points:\", lastElement.points.length);\n        const recognized = recognizeShape(lastElement.points);\n        console.log(\"Recognition result:\", recognized);\n        if (recognized) {\n          console.log(`Recognized as ${recognized.type}`);\n          // Add the corrected shape alongside the original drawing\n          const correctedShape = {\n            ...recognized,\n            id: Date.now(),\n            isCorrected: true // Mark as AI-corrected shape\n          };\n          setElements(prev => [...prev, correctedShape]);\n\n          // Emit to other users\n          socket.emit(EVENTS.SHAPE_RECOGNIZED, {\n            roomId,\n            shape: correctedShape\n          });\n          setDebugInfo(`Shape corrected: ${recognized.type}`);\n        } else {\n          console.log(\"No shape recognized - keeping as freehand\");\n          setDebugInfo(\"No shape recognized\");\n        }\n      } catch (error) {\n        console.error(\"Recognition error:\", error);\n        setDebugInfo(`Recognition error: ${error.message}`);\n      }\n    }\n  };\n\n  // Add temporary debug layer\n  const renderDebugLayer = () => {\n    if (!isDrawing || elements.length === 0) return null;\n    const lastElement = elements[elements.length - 1];\n    if (lastElement.type !== SHAPES.FREEHAND) return null;\n    return /*#__PURE__*/_jsxDEV(Layer, {\n      children: [lastElement.points.map((point, i) => /*#__PURE__*/_jsxDEV(Circle, {\n        x: point[0],\n        y: point[1],\n        radius: 2,\n        fill: \"red\",\n        opacity: 0.5\n      }, `point-${i}`, false, {\n        fileName: _jsxFileName,\n        lineNumber: 197,\n        columnNumber: 11\n      }, this)), lastElement.points.length > 10 && /*#__PURE__*/_jsxDEV(Rect, {\n        x: Math.min(...lastElement.points.map(p => p[0])),\n        y: Math.min(...lastElement.points.map(p => p[1])),\n        width: Math.max(...lastElement.points.map(p => p[0])) - Math.min(...lastElement.points.map(p => p[0])),\n        height: Math.max(...lastElement.points.map(p => p[1])) - Math.min(...lastElement.points.map(p => p[1])),\n        stroke: \"blue\",\n        strokeWidth: 1,\n        dash: [5, 5]\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 209,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 195,\n      columnNumber: 7\n    }, this);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"whiteboard\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"debug-info\",\n      children: debugInfo\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 231,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Stage, {\n      width: stageSize.width,\n      height: stageSize.height,\n      onMouseDown: handleMouseDown,\n      onMouseMove: handleMouseMove,\n      onMouseUp: handleMouseUp,\n      ref: stageRef,\n      children: [/*#__PURE__*/_jsxDEV(Layer, {\n        children: elements.map(element => {\n          if (element.type === SHAPES.FREEHAND) {\n            return /*#__PURE__*/_jsxDEV(Line, {\n              points: element.points.flat(),\n              stroke: \"#000\",\n              strokeWidth: 3,\n              tension: 0.5,\n              lineCap: \"round\",\n              lineJoin: \"round\",\n              opacity: 0.7 // Make original drawings slightly transparent\n            }, element.id, false, {\n              fileName: _jsxFileName,\n              lineNumber: 245,\n              columnNumber: 17\n            }, this);\n          }\n          if (element.type === SHAPES.CIRCLE) {\n            return /*#__PURE__*/_jsxDEV(Circle, {\n              x: element.x + element.radius,\n              y: element.y + element.radius,\n              radius: element.radius,\n              stroke: element.isCorrected ? \"#667eea\" : \"#000\",\n              strokeWidth: element.isCorrected ? 4 : 3,\n              fill: element.isCorrected ? \"rgba(102, 126, 234, 0.1)\" : \"transparent\",\n              dash: element.isCorrected ? [5, 5] : []\n            }, element.id, false, {\n              fileName: _jsxFileName,\n              lineNumber: 259,\n              columnNumber: 17\n            }, this);\n          }\n          if (element.type === SHAPES.RECTANGLE) {\n            return /*#__PURE__*/_jsxDEV(Rect, {\n              x: element.x,\n              y: element.y,\n              width: element.width,\n              height: element.height,\n              stroke: element.isCorrected ? \"#667eea\" : \"#000\",\n              strokeWidth: element.isCorrected ? 4 : 3,\n              fill: element.isCorrected ? \"rgba(102, 126, 234, 0.1)\" : \"transparent\",\n              dash: element.isCorrected ? [5, 5] : []\n            }, element.id, false, {\n              fileName: _jsxFileName,\n              lineNumber: 273,\n              columnNumber: 17\n            }, this);\n          }\n          return null;\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 241,\n        columnNumber: 9\n      }, this), renderDebugLayer()]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 233,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 230,\n    columnNumber: 5\n  }, this);\n};\n_s(Whiteboard, \"Qtg86uKDP5BGLe+/QGWIuhQbA70=\", false, function () {\n  return [useDrawing];\n});\n_c = Whiteboard;\nexport default Whiteboard;\nvar _c;\n$RefreshReg$(_c, \"Whiteboard\");","map":{"version":3,"names":["React","useRef","useEffect","useContext","useState","Stage","Layer","Line","Circle","Rect","SHAPES","EVENTS","useDrawing","SocketContext","recognizeShape","jsxDEV","_jsxDEV","Whiteboard","roomId","users","onToolChange","onClearBoard","onSaveNotes","onExport","_s","socket","stageRef","debugInfo","setDebugInfo","stageSize","setStageSize","width","height","currentTool","setCurrentTool","elements","setElements","isDrawing","handleDrawStart","handleDrawMove","handleDrawEnd","updateStageSize","_stageRef$current","container","current","rect","getBoundingClientRect","window","addEventListener","removeEventListener","handleToolChange","tool","handleClearBoard","emit","CLEAR_BOARD","handleSaveNotes","_stageRef$current2","canvas","toDataURL","link","document","createElement","download","Date","now","href","click","handleExport","meetingData","map","u","name","timestamp","toISOString","dataStr","JSON","stringify","dataBlob","Blob","type","URL","createObjectURL","handleRemoteDrawStart","element","prev","handleRemoteDrawMove","point","length","lastIndex","updated","points","handleShapeRecognized","shape","id","on","DRAW_START","DRAW_MOVE","SHAPE_RECOGNIZED","off","handleMouseDown","e","stage","target","getStage","pos","getPointerPosition","x","y","handleMouseMove","handleMouseUp","lastElement","FREEHAND","console","log","recognized","correctedShape","isCorrected","error","message","renderDebugLayer","children","i","radius","fill","opacity","fileName","_jsxFileName","lineNumber","columnNumber","Math","min","p","max","stroke","strokeWidth","dash","className","onMouseDown","onMouseMove","onMouseUp","ref","flat","tension","lineCap","lineJoin","CIRCLE","RECTANGLE","_c","$RefreshReg$"],"sources":["C:/Users/Amoolya Suneja/Desktop/AI-Liveboard/client/src/components/whiteboard.jsx"],"sourcesContent":["import React, { useRef, useEffect, useContext, useState } from 'react';\r\nimport { Stage, Layer, Line, Circle, Rect } from 'react-konva';\r\nimport { SHAPES, EVENTS } from '../utils/constants';\r\nimport useDrawing from '../hooks/useDrawing';\r\nimport { SocketContext } from '../context/SocketContext';\r\nimport { recognizeShape } from '../utils/shapeRecognition';\r\n\r\nconst Whiteboard = ({ roomId, users, onToolChange, onClearBoard, onSaveNotes, onExport }) => {\r\n  const socket = useContext(SocketContext);\r\n  const stageRef = useRef(null);\r\n  const [debugInfo, setDebugInfo] = useState(\"\");\r\n  const [stageSize, setStageSize] = useState({ width: 800, height: 600 });\r\n  const [currentTool, setCurrentTool] = useState('freehand');\r\n  const {\r\n    elements,\r\n    setElements,\r\n    isDrawing,\r\n    handleDrawStart,\r\n    handleDrawMove,\r\n    handleDrawEnd\r\n  } = useDrawing(socket, roomId);\r\n\r\n  // Update stage size on mount and window resize\r\n  useEffect(() => {\r\n    const updateStageSize = () => {\r\n      const container = stageRef.current?.container();\r\n      if (container) {\r\n        const rect = container.getBoundingClientRect();\r\n        setStageSize({\r\n          width: rect.width,\r\n          height: rect.height\r\n        });\r\n      }\r\n    };\r\n\r\n    updateStageSize();\r\n    window.addEventListener('resize', updateStageSize);\r\n    return () => window.removeEventListener('resize', updateStageSize);\r\n  }, []);\r\n\r\n  // Handle tool changes\r\n  const handleToolChange = (tool) => {\r\n    setCurrentTool(tool);\r\n    setDebugInfo(`Tool changed to: ${tool}`);\r\n  };\r\n\r\n  // Handle clear board\r\n  const handleClearBoard = () => {\r\n    setElements([]);\r\n    socket.emit(EVENTS.CLEAR_BOARD, { roomId });\r\n    setDebugInfo(\"Board cleared\");\r\n  };\r\n\r\n  // Handle save notes\r\n  const handleSaveNotes = () => {\r\n    const canvas = stageRef.current?.toDataURL();\r\n    const link = document.createElement('a');\r\n    link.download = `meeting-notes-${roomId}-${Date.now()}.png`;\r\n    link.href = canvas;\r\n    link.click();\r\n    setDebugInfo(\"Notes saved as image\");\r\n  };\r\n\r\n  // Handle export\r\n  const handleExport = () => {\r\n    const meetingData = {\r\n      roomId,\r\n      users: users.map(u => u.name),\r\n      elements,\r\n      timestamp: new Date().toISOString()\r\n    };\r\n    \r\n    const dataStr = JSON.stringify(meetingData, null, 2);\r\n    const dataBlob = new Blob([dataStr], { type: 'application/json' });\r\n    const link = document.createElement('a');\r\n    link.download = `meeting-export-${roomId}-${Date.now()}.json`;\r\n    link.href = URL.createObjectURL(dataBlob);\r\n    link.click();\r\n    setDebugInfo(\"Meeting exported as JSON\");\r\n  };\r\n\r\n  // Socket listeners\r\n  useEffect(() => {\r\n    const handleRemoteDrawStart = (element) => {\r\n      setElements(prev => [...prev, element]);\r\n    };\r\n\r\n    const handleRemoteDrawMove = (point) => {\r\n      setElements(prev => {\r\n        if (prev.length === 0) return prev;\r\n        const lastIndex = prev.length - 1;\r\n        const updated = [...prev];\r\n        updated[lastIndex] = {\r\n          ...updated[lastIndex],\r\n          points: [...updated[lastIndex].points, point]\r\n        };\r\n        return updated;\r\n      });\r\n    };\r\n\r\n    const handleShapeRecognized = (shape) => {\r\n      setElements(prev => [...prev, { ...shape, id: Date.now() }]);\r\n      setDebugInfo(`Shape corrected: ${shape.type}`);\r\n    };\r\n\r\n    const handleClearBoard = () => {\r\n      setElements([]);\r\n      setDebugInfo(\"Board cleared by another user\");\r\n    };\r\n\r\n    socket.on(EVENTS.DRAW_START, handleRemoteDrawStart);\r\n    socket.on(EVENTS.DRAW_MOVE, handleRemoteDrawMove);\r\n    socket.on(EVENTS.SHAPE_RECOGNIZED, handleShapeRecognized);\r\n    socket.on(EVENTS.CLEAR_BOARD, handleClearBoard);\r\n\r\n    return () => {\r\n      socket.off(EVENTS.DRAW_START, handleRemoteDrawStart);\r\n      socket.off(EVENTS.DRAW_MOVE, handleRemoteDrawMove);\r\n      socket.off(EVENTS.SHAPE_RECOGNIZED, handleShapeRecognized);\r\n      socket.off(EVENTS.CLEAR_BOARD, handleClearBoard);\r\n    };\r\n  }, [setElements, socket]);\r\n\r\n  // Drawing events\r\n  const handleMouseDown = (e) => {\r\n    const stage = e.target.getStage();\r\n    const pos = stage.getPointerPosition();\r\n    \r\n    if (currentTool === 'freehand') {\r\n      handleDrawStart(pos.x, pos.y);\r\n      setDebugInfo(\"Drawing started...\");\r\n    } else if (currentTool === 'circle' || currentTool === 'rectangle') {\r\n      // For shape tools, we'll handle them differently\r\n      setDebugInfo(`${currentTool} tool selected - draw to create shape`);\r\n    }\r\n  };\r\n\r\n  const handleMouseMove = (e) => {\r\n    if (!isDrawing || currentTool !== 'freehand') return;\r\n    const stage = e.target.getStage();\r\n    const pos = stage.getPointerPosition();\r\n    handleDrawMove(pos.x, pos.y);\r\n  };\r\n\r\n  const handleMouseUp = () => {\r\n    if (!isDrawing || currentTool !== 'freehand') return;\r\n    handleDrawEnd();\r\n    \r\n    if (elements.length === 0) return;\r\n    \r\n    const lastElement = elements[elements.length - 1];\r\n    if (lastElement.type === SHAPES.FREEHAND && lastElement.points.length >= 6) {\r\n      try {\r\n        console.log(\"Attempting shape recognition with points:\", lastElement.points.length);\r\n        const recognized = recognizeShape(lastElement.points);\r\n        console.log(\"Recognition result:\", recognized);\r\n        \r\n        if (recognized) {\r\n          console.log(`Recognized as ${recognized.type}`);\r\n          // Add the corrected shape alongside the original drawing\r\n          const correctedShape = {\r\n            ...recognized,\r\n            id: Date.now(),\r\n            isCorrected: true // Mark as AI-corrected shape\r\n          };\r\n          \r\n          setElements(prev => [...prev, correctedShape]);\r\n          \r\n          // Emit to other users\r\n          socket.emit(EVENTS.SHAPE_RECOGNIZED, {\r\n            roomId,\r\n            shape: correctedShape\r\n          });\r\n          \r\n          setDebugInfo(`Shape corrected: ${recognized.type}`);\r\n        } else {\r\n          console.log(\"No shape recognized - keeping as freehand\");\r\n          setDebugInfo(\"No shape recognized\");\r\n        }\r\n      } catch (error) {\r\n        console.error(\"Recognition error:\", error);\r\n        setDebugInfo(`Recognition error: ${error.message}`);\r\n      }\r\n    }\r\n  };\r\n\r\n  // Add temporary debug layer\r\n  const renderDebugLayer = () => {\r\n    if (!isDrawing || elements.length === 0) return null;\r\n    \r\n    const lastElement = elements[elements.length - 1];\r\n    if (lastElement.type !== SHAPES.FREEHAND) return null;\r\n    \r\n    return (\r\n      <Layer>\r\n        {lastElement.points.map((point, i) => (\r\n          <Circle\r\n            key={`point-${i}`}\r\n            x={point[0]}\r\n            y={point[1]}\r\n            radius={2}\r\n            fill=\"red\"\r\n            opacity={0.5}\r\n          />\r\n        ))}\r\n        \r\n        {/* Bounding box */}\r\n        {lastElement.points.length > 10 && (\r\n          <Rect\r\n            x={Math.min(...lastElement.points.map(p => p[0]))}\r\n            y={Math.min(...lastElement.points.map(p => p[1]))}\r\n            width={\r\n              Math.max(...lastElement.points.map(p => p[0])) - \r\n              Math.min(...lastElement.points.map(p => p[0]))\r\n            }\r\n            height={\r\n              Math.max(...lastElement.points.map(p => p[1])) - \r\n              Math.min(...lastElement.points.map(p => p[1]))\r\n            }\r\n            stroke=\"blue\"\r\n            strokeWidth={1}\r\n            dash={[5, 5]}\r\n          />\r\n        )}\r\n      </Layer>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <div className=\"whiteboard\">\r\n      <div className=\"debug-info\">{debugInfo}</div>\r\n      \r\n      <Stage\r\n        width={stageSize.width}\r\n        height={stageSize.height}\r\n        onMouseDown={handleMouseDown}\r\n        onMouseMove={handleMouseMove}\r\n        onMouseUp={handleMouseUp}\r\n        ref={stageRef}\r\n      >\r\n        <Layer>\r\n          {elements.map((element) => {\r\n            if (element.type === SHAPES.FREEHAND) {\r\n              return (\r\n                <Line\r\n                  key={element.id}\r\n                  points={element.points.flat()}\r\n                  stroke=\"#000\"\r\n                  strokeWidth={3}\r\n                  tension={0.5}\r\n                  lineCap=\"round\"\r\n                  lineJoin=\"round\"\r\n                  opacity={0.7} // Make original drawings slightly transparent\r\n                />\r\n              );\r\n            }\r\n            if (element.type === SHAPES.CIRCLE) {\r\n              return (\r\n                <Circle\r\n                  key={element.id}\r\n                  x={element.x + element.radius}\r\n                  y={element.y + element.radius}\r\n                  radius={element.radius}\r\n                  stroke={element.isCorrected ? \"#667eea\" : \"#000\"}\r\n                  strokeWidth={element.isCorrected ? 4 : 3}\r\n                  fill={element.isCorrected ? \"rgba(102, 126, 234, 0.1)\" : \"transparent\"}\r\n                  dash={element.isCorrected ? [5, 5] : []}\r\n                />\r\n              );\r\n            }\r\n            if (element.type === SHAPES.RECTANGLE) {\r\n              return (\r\n                <Rect\r\n                  key={element.id}\r\n                  x={element.x}\r\n                  y={element.y}\r\n                  width={element.width}\r\n                  height={element.height}\r\n                  stroke={element.isCorrected ? \"#667eea\" : \"#000\"}\r\n                  strokeWidth={element.isCorrected ? 4 : 3}\r\n                  fill={element.isCorrected ? \"rgba(102, 126, 234, 0.1)\" : \"transparent\"}\r\n                  dash={element.isCorrected ? [5, 5] : []}\r\n                />\r\n              );\r\n            }\r\n            return null;\r\n          })}\r\n        </Layer>\r\n        \r\n        {renderDebugLayer()}\r\n      </Stage>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Whiteboard;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}